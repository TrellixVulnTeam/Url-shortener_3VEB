"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5177],{45177:function(n,t,e){function i(n){var t=figma.currentPage.selection[0];if(t)return t.exportAsync(n||{format:"PNG",constraint:{type:"SCALE",value:2}})}function r(n){var t=n.includeSvg,e=n.renameIdsToMainComponentId;function i(n){return n.split("/").map((function(n){return n.trim()})).join("/")}function r(n){return n.visible&&"COMPONENT"===n.type}function o(n,t){var e=t.split(", ").map((function(n){var t;return null===(t=n.split("=").pop())||void 0===t?void 0:t.trim()}));return"".concat(n,"/").concat(e.join(", "))}function a(n,t){if("children"in(n=t(n))&&n.children)for(var e=0;e<n.children.length;e++){var i=n.children[e];if(i)try{a(i,t)}catch(r){}}}var c={},l={},u=figma.getLocalPaintStyles().map((function(n){var t,e=figma.getStyleById(n.id);return e&&function(n){return"PAINT"===n.type}(e)&&e.paints[0]&&"SOLID"===e.paints[0].type?{name:e.name,id:e.id,color:Object.assign({},e.paints[0].color,{a:null!==(t=e.paints[0].opacity)&&void 0!==t?t:1})}:null})).filter((function(n){return null!==n&&void 0!==n})),d="%%BLUSH_COMPONENT_PLACEHOLDER%%",f=[],s=[],m=[];return figma.currentPage.children.forEach((function(n){r(n)?s.push({id:n.id,name:n.name,x:n.x,y:n.y,nodes:{}}):"COMPONENT_SET"===n.type&&"children"in n&&n.children.forEach((function(t){r(t)&&s.push({id:t.id,name:o(n.name,t.name),x:t.x,y:t.y,nodes:{}})}))})),t&&s.forEach((function(n){var t=figma.getNodeById(n.id),r=e?t.clone():t;try{var c=n.name,l=c.startsWith("Blush/"),u=i(c.replace("Blush/","Master/"));if(e){if(r.name=u,l){var s=r.id;r.name=s,n.nodes[s]||(n.nodes[s]={id:s,name:u})}a(r,(function(t){var e;if("INSTANCE"===t.type){var r,a=t.mainComponent,c=null===(r=t.mainComponent)||void 0===r?void 0:r.parent;figma.currentPage.findChild((function(n){return n.id===(null===a||void 0===a?void 0:a.id)||n.id===(null===c||void 0===c?void 0:c.id)}))||(t=t.detachInstance())}var u="outlineStroke"in t&&t.outlineStroke();if(u){var f,s,m,v=null!==(f=null===(s=t.parent)||void 0===s?void 0:s.children.findIndex((function(n){return n.id===t.id})))&&void 0!==f?f:0;null===(m=t.parent)||void 0===m||m.insertChild(v,u),u.relativeTransform=t.relativeTransform,t.remove(),t=u}var g="fillStyleId"in t&&t.fillStyleId&&(null===(e=figma.getStyleById(String(t.fillStyleId)))||void 0===e?void 0:e.name);if(g){var h=i(t.name),p=t.id,y={name:g};t.name=p,n.nodes[p]||(n.nodes[p]={id:p,name:h}),n.nodes[p].color=y}if(l&&"INSTANCE"===t.type&&t.mainComponent){var S,E,N,I=("COMPONENT_SET"===(null===(S=t.mainComponent.parent)||void 0===S?void 0:S.type)?o(t.mainComponent.parent.name,t.mainComponent.name):i(t.mainComponent.name)).replace("Blush/","Master/"),C=t.id,P=null!==(E=t.width/t.mainComponent.width)&&void 0!==E?E:1,w=null!==(N=t.height/t.mainComponent.height)&&void 0!==N?N:1,O=t.detachInstance(),x={x:O.x,y:O.y,width:O.width,height:O.height,rotation:O.rotation,scaleX:P,scaleY:w};O.name=C;var b=figma.createRectangle();b.name=d,b.resize(O.width,O.height),b.x=0,b.y=0,O.appendChild(b),O.children.forEach((function(n){return n.id!==b.id&&n.remove()})),n.nodes[C]||(n.nodes[C]={id:C,name:I}),n.nodes[C].position=x}return t}))}if(t.children.length)return void f.push(r.exportAsync({format:"SVG",svgIdAttribute:!0,useAbsoluteBounds:!0}).then((function(t){var e="";t.forEach((function(n){e+=String.fromCharCode(n)}));var i="".concat("%%BLUSH_ID_END%%","(?:_[0-9]+)?"),r=new RegExp(i,"g");e=e.replace(r,"");var o="".concat(d,"(?:_[0-9]+)?"),a=new RegExp(o,"g");e=e.replace(a,d),n.svg=e})))}catch(v){console.log("Error with ".concat(t.name),v)}finally{e&&m.push(r)}n.svg=function(n){return'<svg viewBox="0 0 1 1" xmlns="http://www.w3.org/2000/svg" overflow="visible" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:blush="http://design.blush"><g id="'.concat(n,'" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0" blush:viewBox="0 0 1 1"/></svg>')}(t.name)})),Promise.all(f).then((function(){return s.forEach((function(n){var t=n.name.startsWith("Blush/"),e=i(n.name.replace("Blush/","Master/")),r={id:n.id,name:e,x:n.x,y:n.y,nodes:n.nodes};(t?l:c)[n.id]=Object.assign({},r,{svg:n.svg})})),{components:c,masters:l,documentColors:u}})).finally((function(){m.forEach((function(n){return n.remove()}))}))}function o(){function n(n){return null!==n&&void 0!==n}var t={},e=figma.currentPage.children.map((function(n,e){if("COMPONENT"!==n.type)return null;if(!n.visible)return null;var i=function(n){var t=n.split("/");return t.length>1&&t.pop(),t.join("/")}(n.name);return t[i]?t[i].width!==n.width||t[i].height!==n.height?{id:"wrongSize".concat(n.id),type:"wrongSize",nodeName:n.name,nodeId:n.id,issue:"Artboard size should be ".concat(t[i].width,"x").concat(t[i].height)}:null:(t[i]={width:n.width,height:n.height},null)})).filter(n),i=figma.currentPage.findAll((function(n){return!!("isMask"in n&&n.isMask&&"fillStyleId"in n&&n.fillStyleId)})).map((function(n){return{id:"maskIssue".concat(n.id),type:"maskIssue",nodeName:n.name,nodeId:n.id,issue:"Masks must not use custom colors"}})),r=figma.currentPage.findAll((function(n){return"COMPONENT"!==n.type&&"COMPONENT_SET"!==n.type&&"FRAME"!==n.type&&("constraints"in n&&!function(n){var t=n.horizontal,e=n.vertical;return"SCALE"===t&&"SCALE"===e}(n.constraints))})).map((function(n){return{id:"wrongConstraint".concat(n.id),type:"wrongConstraint",nodeName:n.name,nodeId:n.id,issue:'All nodes must use "scale" constraints'}}));return[].concat(e.filter(n)).concat(r).concat(i)}function a(n){var t=n.map((function(n){return figma.getNodeById(n)})).filter((function(n){return null!==n&&void 0!==n}));figma.viewport.scrollAndZoomIntoView(t);try{figma.currentPage.selection=t}catch(e){}}function c(n,t){n.forEach((function(n){var e=figma.getNodeById(n);e&&"constraints"in e&&(e.constraints=t)}))}function l(n,t){n.forEach((function(n){var t=figma.getNodeById(n);t&&"fills"in t&&(t.fills=[{type:"SOLID",blendMode:"NORMAL",color:{r:.8,g:.8,b:.8},opacity:1,visible:!0}])}))}function u(){var n=figma.currentPage.getPluginData("makersData");return n?JSON.parse(n):null}function d(n){figma.currentPage.setPluginData("makersData",JSON.stringify(n))}function f(){var n=[],t=["FRAME","COMPONENT","COMPONENT_SET"];function e(n,t){var e=t.split(", ").map((function(n){var t;return null===(t=n.split("=").pop())||void 0===t?void 0:t.trim()}));return"".concat(n,"/").concat(e.join(", "))}return figma.currentPage.children.forEach((function(i){var r=i.name,o=i.id,a=i.x,c=i.y,l=i.type,u=r.toLowerCase().startsWith("@blush")||r.toLowerCase().startsWith("blush"),d=t.includes(l);u&&d&&("COMPONENT_SET"!==l?n.push({id:o,name:r,x:a,y:c}):i.children.forEach((function(t){n.push({id:t.id,name:e(r,t.name),x:t.x,y:t.y})})))})),n}function s(n){var t=n.name,e=n.color,i=figma.getLocalPaintStyles(),r=t.split("/"),o=i.filter((function(n){var t=n.name.split("/");return t.length>=3&&t[0]===r[0]})),a=o[o.length-1],c=figma.createPaintStyle();if(a){var l,u,d,f=a.name.split("/"),s=null!==(l=Number(null===(u=f[1])||void 0===u||null===(d=u.match(/\d+/g))||void 0===d?void 0:d[0]))&&void 0!==l?l:1;c.name="".concat(f[0],"/").concat(f[0]," ").concat(s+1,"/500")}else c.name="".concat(t,"/500");c.paints=[{visible:!0,type:"SOLID",color:null!==e&&void 0!==e?e:{r:.95,g:.95,b:.95}}]}function m(n,t){n.forEach((function(n){var e=figma.getStyleById(n);if(e){var i=e.name.split("/").slice(1).join("/");e.name="".concat(t,"/").concat(i)}}))}function v(n,t){var e=figma.getStyleById(n);if(e&&"PAINT"===e.type){var i=figma.createPaintStyle();i.name=e.name,i.paints=[{visible:!0,type:"SOLID",color:{r:t.r/255,g:t.g/255,b:t.b/255},opacity:1}],figma.currentPage.findAll((function(n){return"fillStyleId"in n&&n.fillStyleId===e.id})).forEach((function(n){"fillStyleId"in n&&(n.fillStyleId=i.id)})),figma.moveLocalPaintStyleAfter(i,e),e.remove()}}function g(n){var t=figma.getStyleById(n);null===t||void 0===t||t.remove()}function h(n){return Promise.all(n.map((function(n){var t=figma.getNodeById(n);if(t&&"exportAsync"in t)return t.exportAsync({format:"PNG",constraint:{type:"WIDTH",value:112}}).then((function(t){var e="";return t.forEach((function(n){e+=String.fromCharCode(n)})),{data:e,nodeId:n}}))})))}e.d(t,{Hx:function(){return i},fc:function(){return r},gd:function(){return o},NB:function(){return a},yp:function(){return c},g7:function(){return l},MF:function(){return u},R_:function(){return d},C5:function(){return f},Bt:function(){return s},c$:function(){return m},PM:function(){return v},$j:function(){return g},gX:function(){return h}})}}]);